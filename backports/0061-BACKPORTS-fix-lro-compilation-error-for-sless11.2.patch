From: Erez Shitrit <erezsh@mellanox.com>
Subject: [PATCH] BACKPORTS: fix lro compilation error for sless11.2

Signed-off-by: Erez Shitrit <erezsh@mellanox.com>
---
 drivers/infiniband/ulp/ipoib/ipoib_ethtool.c |    9 ++++++---
 1 files changed, 6 insertions(+), 3 deletions(-)

diff --git a/drivers/infiniband/ulp/ipoib/ipoib_ethtool.c b/drivers/infiniband/ulp/ipoib/ipoib_ethtool.c
index xxxxxxx..xxxxxxx xxxxxx
--- a/drivers/infiniband/ulp/ipoib/ipoib_ethtool.c
+++ b/drivers/infiniband/ulp/ipoib/ipoib_ethtool.c
@@ -458,10 +458,13 @@ static int ipoib_set_channels(struct net_device *dev,
 #endif
 
 #if (LINUX_VERSION_CODE >= KERNEL_VERSION(2,6,36)) && defined (CONFIG_COMPAT_USE_LRO)
-int ipoib_set_flags(struct net_device *dev, u32 data, u32 supported)
+int ipoib_set_flags(struct net_device *dev, u32 data)
 {
-       	ethtool_op_set_flags(dev, data, supported);
-       	
+       	if (data & ETH_FLAG_LRO)
+               	dev->features |= NETIF_F_LRO;
+       	else
+               	dev->features &= ~NETIF_F_LRO;       	
+	
 	return 0;
 }
 #elif defined (CONFIG_COMPAT_USE_LRO)
